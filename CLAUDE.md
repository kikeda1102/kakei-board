# CLAUDE.md

## ディレクトリ構成

バーティカルスライス単位で機能を分割する:

- `expense` - 支出管理
- `summary` - 集計・サマリー
- `budget` - 予算管理
- `score` - スコアリング

## コーディング規約

### 共通

- **DRY**: 同じロジックを複数箇所に書かず、抽出を検討する。ただし過度な抽象化は避ける
- **コメント**: コードの「何をしているか」ではなく「なぜそうしているか」を書く。自明なコードにコメントは不要
- **マジックナンバー禁止**: 数値リテラルを直接埋め込まず、名前付き定数として定義する
- **ベストプラクティス**: 各言語・フレームワークの公式が推奨するベストプラクティスに従う
- **後方互換性は不要**: 未リリースのプロジェクトのため、後方互換性を維持する必要はない。非推奨な書き方は最新の推奨方法へ置き換える

### Go（backend）

- `gofmt` / `go vet` 準拠
- `internal/` パッケージで公開範囲を制御する
- エラーは呼び出し元に返し、握りつぶさない

### TypeScript（frontend）

- strict mode を有効にする
- `as` 型アサーション禁止 — 型ガードや型の絞り込みで対応する
- API 層は RTK Query で統一する

### テスト

- アウトサイドイン TDD: 受け入れテスト → ユニットテストの順で書く

## セキュリティ注意事項（public リポジトリ）

- `.env` ファイルをコミットしない — テンプレートは `.env.example` を使う
- DB 接続情報や API キーをソースコードにハードコードしない
- シークレットは環境変数経由で注入する
